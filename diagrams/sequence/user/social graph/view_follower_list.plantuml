@startuml
!theme vibrant
title View Followers List Sequence

actor User

box "Favi-BE Backend" #LightBlue
  participant "ProfilesController" as ProfileController
  participant "IProfileService" as ProfileService
  participant "IPrivacyGuard" as PrivacyGuard
end box

User -> ProfileController: GET /api/profiles/{id}/followers
activate ProfileController

ProfileController -> ProfileService: GetEntityByIdAsync(id)
activate ProfileService
ProfileService --> ProfileController: Profile (or null)
deactivate ProfileService

alt Profile exists
    ProfileController -> PrivacyGuard: CanViewFollowListAsync(profile, viewerId)
    activate PrivacyGuard
    PrivacyGuard --> ProfileController: bool canView
    deactivate PrivacyGuard

    alt User can view list
        ProfileController -> ProfileService: GetFollowersAsync(id, skip, take)
        activate ProfileService
        ProfileService --> ProfileController: List<ProfileResponse>
        deactivate ProfileService
        ProfileController --> User: 200 OK (List)
    else User cannot view
        ProfileController --> User: 403 Forbidden
    end

else Profile does not exist
    ProfileController --> User: 404 Not Found
end

deactivate ProfileController
@enduml
